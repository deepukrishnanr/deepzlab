{"ast":null,"code":"var _jsxFileName = \"/Users/a-8048/Workspace/UI-forum-cochin/react-demo/wiki-api-with-use-effect/src/App.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst App = () => {\n  const [term, setTerm] = useState(\"\"); // state, setState()\n  //useEffect()\n\n  useEffect(() => {\n    //Action to perform\n    console.log(\"Inside use effect\"); //const cancelTokenSource = axios.CancelToken.source();\n\n    const search = async function () {\n      const response = await axios.get(\"https://en.wikipedia.org/w/api.php\", {\n        //cancelToken: cancelTokenSource.token,\n        params: {\n          action: \"query\",\n          list: \"search\",\n          origin: '*',\n          format: 'json',\n          srsearch: term\n        }\n      });\n      console.log(response.data.query.search);\n    };\n\n    let apiIntervel = setTimeout(() => {\n      if (term) {\n        search();\n      }\n    }, 1000);\n    return () => {\n      console.log(\"Inside clean up function\");\n      clearTimeout(apiIntervel); //cancelTokenSource.cancel(\"Aborting the api\");\n    };\n  }, [term] // optional Array ==> nothing  [] [state]\n  );\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui two column centered grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, \"Enter Search Term\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: term,\n    onChange: e => setTerm(e.target.value),\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui celled-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, term)));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/a-8048/Workspace/UI-forum-cochin/react-demo/wiki-api-with-use-effect/src/App.jsx"],"names":["React","useState","useEffect","axios","App","term","setTerm","console","log","search","response","get","params","action","list","origin","format","srsearch","data","query","apiIntervel","setTimeout","clearTimeout","e","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAGd,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,EAAD,CAAhC,CAHc,CAGyB;AAE3C;;AACIC,EAAAA,SAAS,CACL,MAAM;AACE;AACJK,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAFE,CAGF;;AACA,UAAMC,MAAM,GAAG,kBAAiB;AAC5B,YAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAU,oCAAV,EAAiD;AACpE;AACAC,QAAAA,MAAM,EAAG;AACLC,UAAAA,MAAM,EAAE,OADH;AAELC,UAAAA,IAAI,EAAE,QAFD;AAGLC,UAAAA,MAAM,EAAE,GAHH;AAILC,UAAAA,MAAM,EAAE,MAJH;AAKLC,UAAAA,QAAQ,EAAEZ;AALL;AAF2D,OAAjD,CAAvB;AAWAE,MAAAA,OAAO,CAACC,GAAR,CAAYE,QAAQ,CAACQ,IAAT,CAAcC,KAAd,CAAoBV,MAAhC;AACH,KAbD;;AAeA,QAAIW,WAAW,GAAGC,UAAU,CAAC,MAAI;AAC7B,UAAGhB,IAAH,EAAS;AACLI,QAAAA,MAAM;AACT;AACJ,KAJ2B,EAIzB,IAJyB,CAA5B;AAQA,WAAO,MAAM;AACTF,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAc,MAAAA,YAAY,CAACF,WAAD,CAAZ,CAFS,CAGT;AACH,KAJD;AAOH,GAnCI,EAmCH,CAACf,IAAD,CAnCG,CAoCJ;AApCI,GAAT;AAwCA,sBACI;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,eAEI;AACI,IAAA,KAAK,EAAEA,IADX;AAEI,IAAA,QAAQ,EAAGkB,CAAD,IAAOjB,OAAO,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAF5B;AAGI,IAAA,SAAS,EAAC,OAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,CADJ,eAYI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKpB,IADL,CAZJ,CADJ,CADJ;AAoBH,CAlED;;AAoEA,eAAeD,GAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\n\nconst App = () => {\n\n\n    const [term, setTerm] = useState(\"\");  // state, setState()\n\n//useEffect()\n    useEffect(\n        () => {\n                //Action to perform\n            console.log(\"Inside use effect\")\n            //const cancelTokenSource = axios.CancelToken.source();\n            const search = async function() {\n                const response = await axios.get(\"https://en.wikipedia.org/w/api.php\" , {\n                    //cancelToken: cancelTokenSource.token,\n                    params : {\n                        action: \"query\",\n                        list: \"search\",\n                        origin: '*',\n                        format: 'json',\n                        srsearch: term\n\n                    }\n                });\n                console.log(response.data.query.search)\n            }\n\n            let apiIntervel = setTimeout(()=>{\n                if(term) {\n                    search();\n                }\n            }, 1000)\n\n\n\n            return () => {\n                console.log(\"Inside clean up function\");\n                clearTimeout(apiIntervel)\n                //cancelTokenSource.cancel(\"Aborting the api\");\n            }\n\n\n        },[term]\n         // optional Array ==> nothing  [] [state]\n    )\n\n\n    return(\n        <div className=\"ui two column centered grid\">\n            <div className=\"column\">\n                <div className=\"ui form\">\n                    <div className=\"field\">\n                        <label>Enter Search Term</label>\n                        <input\n                            value={term}\n                            onChange={(e) => setTerm(e.target.value)}\n                            className=\"input\"\n                        />\n                    </div>\n\n                </div>\n                <div className=\"ui celled-list\">\n                    {term}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}